<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€¥æ€§ä¸Šå‘¼å¸é“æ„ŸæŸ“ç—…åŸé«”-ç–¾ç—…é—œè¯åœ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        body {
            background-color: #f8fafc;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e1e8f0;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .legend {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #3498db;
        }
        
        .legend h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
        }
        
        .color-box {
            width: 22px;
            height: 22px;
            margin-right: 10px;
            border-radius: 4px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }
        
        .color-label {
            font-size: 14px;
            line-height: 1.3;
        }
        
        .bipartite-container {
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            min-height: 700px;
            gap: 80px;
            margin-bottom: 30px;
            position: relative;
        }
        
        .pathogen-side {
            flex: 0.8;
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 180px;
            max-width: 200px;
        }
        
        .disease-side {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 240px;
            max-width: 260px;
        }
        
        .side-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e8f0;
            text-align: center;
        }
        
        .pathogen-card {
            background-color: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 5px solid;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            z-index: 10;
        }
        
        .pathogen-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .pathogen-card.active {
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
        }
        
        .pathogen-card.disease-active {
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.5);
        }
        
        .pathogen-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .pathogen-type {
            font-size: 12px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        .disease-card {
            background-color: white;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-top: 3px solid #2c3e50;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 10;
            cursor: pointer;
        }
        
        .disease-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .disease-card.active {
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.3);
        }
        
        .disease-card.pathogen-active {
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.5);
        }
        
        .disease-location {
            font-size: 13px;
            font-weight: 600;
            color: #7f8c8d;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .disease-name {
            font-size: 16px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .symptoms {
            font-size: 13px;
            color: #555;
            line-height: 1.5;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #e74c3c;
        }
        
        .connections-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .connection-line {
            position: absolute;
            background-color: rgba(52, 152, 219, 0.6);
            height: 3px;
            transform-origin: 0 0;
            z-index: 1;
            pointer-events: none;
            transition: all 0.3s ease;
        }
        
        .connection-line.highlight {
            background-color: rgba(231, 76, 60, 0.8);
            height: 4px;
            z-index: 2;
        }
        
        .connection-line.disease-highlight {
            background-color: rgba(46, 204, 113, 0.8);
            height: 4px;
            z-index: 2;
        }
        
        .instructions {
            background-color: #e8f4fc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
            color: #2c3e50;
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .mode-btn {
            padding: 8px 16px;
            background-color: #ecf0f1;
            color: #2c3e50;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .mode-btn:hover {
            background-color: #d5dbdb;
        }
        
        .clinical-tips {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #e74c3c;
            margin-top: 20px;
        }
        
        .clinical-tips h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .clinical-tips ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .clinical-tips li {
            margin-bottom: 8px;
            font-size: 15px;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e1e8f0;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .reset-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .reset-btn:hover {
            background-color: #2980b9;
        }
        
        @media (max-width: 1200px) {
            .bipartite-container {
                gap: 60px;
            }
        }
        
        @media (max-width: 1024px) {
            .bipartite-container {
                flex-direction: column;
                gap: 40px;
                min-height: auto;
            }
            
            .pathogen-side, .disease-side {
                width: 100%;
                min-width: auto;
                max-width: none;
            }
            
            .legend-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .bipartite-container {
                gap: 30px;
            }
            
            .legend-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .disease-card {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .legend-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>æ€¥æ€§ä¸Šå‘¼å¸é“æ„ŸæŸ“ç—…åŸé«”-ç–¾ç—…é—œè¯åœ–</h1>
        <div class="subtitle">äºŒéƒ¨åœ–å±•ç¤ºï¼šå·¦å´ç—…åŸé«”ï¼Œå³å´ç–¾ç—…ï¼ˆç—…ä½ã€ç—…åã€ç—‡ç‹€ï¼‰</div>
    </header>
    
    <div class="legend">
        <h3>ç—…åŸé«”é¡è‰²å°ç…§åœ–ä¾‹</h3>
        <div class="legend-grid">
            <div class="legend-item">
                <div class="color-box" style="background-color: #FF6B6B;"></div>
                <div class="color-label">é¼»ç—…æ¯’</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #FFA726;"></div>
                <div class="color-label">å† ç‹€ç—…æ¯’</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #4ECDC4;"></div>
                <div class="color-label">è…ºç—…æ¯’</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #FF4081;"></div>
                <div class="color-label">æµæ„Ÿç—…æ¯’</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #7E57C2;"></div>
                <div class="color-label">Aç¾¤éˆçƒèŒ</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #5C6BC0;"></div>
                <div class="color-label">å‰¯æµæ„Ÿç—…æ¯’</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #26A69A;"></div>
                <div class="color-label">è‚ºç‚éˆçƒèŒ</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #42A5F5;"></div>
                <div class="color-label">æµæ„Ÿå—œè¡€æ¡¿èŒ</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #9CCC65;"></div>
                <div class="color-label">è«æ‹‰æ°èŒ</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #8D6E63;"></div>
                <div class="color-label">å‘¼å¸é“åˆèƒç—…æ¯’</div>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background-color: #FF7043;"></div>
                <div class="color-label">è‚ºç‚é»´æ¼¿èŒ</div>
            </div>
        </div>
        <div class="instructions">é»æ“Šå·¦å´ç—…åŸé«”å¡ç‰‡ï¼Œå¯é«˜äº®é¡¯ç¤ºå…¶é—œè¯çš„ç–¾ç—…åŠé€£æ¥ç·š<br>é»æ“Šå³å´ç–¾ç—…å¡ç‰‡ï¼Œå¯é«˜äº®é¡¯ç¤ºå…¶ç›¸é—œçš„ç—…åŸé«”åŠé€£æ¥ç·š</div>
    </div>
    
    <div class="mode-selector">
        <button class="mode-btn active" id="pathogenMode">ç—…åŸé«”æ¨¡å¼</button>
        <button class="mode-btn" id="diseaseMode">ç–¾ç—…æ¨¡å¼</button>
    </div>
    
    <button class="reset-btn" id="resetBtn">é‡ç½®æ‰€æœ‰é«˜äº®</button>
    
    <div class="bipartite-container">
        <div class="pathogen-side">
            <div class="side-title">ç—…åŸé«”</div>
            
            <div class="pathogen-card" data-pathogen="é¼»ç—…æ¯’" style="border-left-color: #FF6B6B;">
                <div class="pathogen-name">é¼»ç—…æ¯’</div>
                <div class="pathogen-type">ç—…æ¯’</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="å† ç‹€ç—…æ¯’" style="border-left-color: #FFA726;">
                <div class="pathogen-name">å† ç‹€ç—…æ¯’</div>
                <div class="pathogen-type">ç—…æ¯’</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="è…ºç—…æ¯’" style="border-left-color: #4ECDC4;">
                <div class="pathogen-name">è…ºç—…æ¯’</div>
                <div class="pathogen-type">ç—…æ¯’</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="æµæ„Ÿç—…æ¯’" style="border-left-color: #FF4081;">
                <div class="pathogen-name">æµæ„Ÿç—…æ¯’</div>
                <div class="pathogen-type">ç—…æ¯’</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="Aç¾¤éˆçƒèŒ" style="border-left-color: #7E57C2;">
                <div class="pathogen-name">Aç¾¤éˆçƒèŒ</div>
                <div class="pathogen-type">ç´°èŒ</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="å‰¯æµæ„Ÿç—…æ¯’" style="border-left-color: #5C6BC0;">
                <div class="pathogen-name">å‰¯æµæ„Ÿç—…æ¯’</div>
                <div class="pathogen-type">ç—…æ¯’</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="è‚ºç‚éˆçƒèŒ" style="border-left-color: #26A69A;">
                <div class="pathogen-name">è‚ºç‚éˆçƒèŒ</div>
                <div class="pathogen-type">ç´°èŒ</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="æµæ„Ÿå—œè¡€æ¡¿èŒ" style="border-left-color: #42A5F5;">
                <div class="pathogen-name">æµæ„Ÿå—œè¡€æ¡¿èŒ</div>
                <div class="pathogen-type">ç´°èŒ</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="è«æ‹‰æ°èŒ" style="border-left-color: #9CCC65;">
                <div class="pathogen-name">è«æ‹‰æ°èŒ</div>
                <div class="pathogen-type">ç´°èŒ</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="å‘¼å¸é“åˆèƒç—…æ¯’" style="border-left-color: #8D6E63;">
                <div class="pathogen-name">å‘¼å¸é“åˆèƒç—…æ¯’</div>
                <div class="pathogen-type">ç—…æ¯’</div>
            </div>
            
            <div class="pathogen-card" data-pathogen="è‚ºç‚é»´æ¼¿èŒ" style="border-left-color: #FF7043;">
                <div class="pathogen-name">è‚ºç‚é»´æ¼¿èŒ</div>
                <div class="pathogen-type">éå…¸å‹ç—…åŸé«”</div>
            </div>
        </div>
        
        <div class="disease-side">
            <div class="side-title">ç–¾ç—…ï¼ˆç—…ä½ã€ç—…åã€ç—‡ç‹€ï¼‰</div>
            
            <div class="disease-card" data-disease="æ€¥æ€§é¼»ç‚" data-pathogens="é¼»ç—…æ¯’,å† ç‹€ç—…æ¯’,è…ºç—…æ¯’,æµæ„Ÿç—…æ¯’">
                <div class="disease-location">é¼»è…”</div>
                <div class="disease-name">æ€¥æ€§é¼»ç‚/æ™®é€šæ„Ÿå†’</div>
                <div class="symptoms">é¼»å¡ã€æµæ¶•ã€æ‰“å™´åšã€è¼•å¾®å’½ç—›ã€ä½ç†±</div>
            </div>
            
            <div class="disease-card" data-disease="æ€¥æ€§å’½å–‰ç‚" data-pathogens="Aç¾¤éˆçƒèŒ,è…ºç—…æ¯’,é¼»ç—…æ¯’,æµæ„Ÿç—…æ¯’">
                <div class="disease-location">å’½éƒ¨</div>
                <div class="disease-name">æ€¥æ€§å’½å–‰ç‚</div>
                <div class="symptoms">å’½ç—›ã€ååš¥å›°é›£ã€ç™¼ç†±ã€æ‰æ¡ƒé«”è…«å¤§</div>
            </div>
            
            <div class="disease-card" data-disease="æ€¥æ€§å–‰ç‚" data-pathogens="æµæ„Ÿç—…æ¯’,å‰¯æµæ„Ÿç—…æ¯’,è…ºç—…æ¯’,é¼»ç—…æ¯’">
                <div class="disease-location">å–‰éƒ¨</div>
                <div class="disease-name">æ€¥æ€§å–‰ç‚</div>
                <div class="symptoms">è²éŸ³å˜¶å•ã€å¤±è²ã€ä¹¾å’³ã€å–‰éƒ¨ä¸é©</div>
            </div>
            
            <div class="disease-card" data-disease="æ€¥æ€§é¼»ç«‡ç‚" data-pathogens="è‚ºç‚éˆçƒèŒ,æµæ„Ÿå—œè¡€æ¡¿èŒ,è«æ‹‰æ°èŒ">
                <div class="disease-location">é¼»ç«‡</div>
                <div class="disease-name">æ€¥æ€§é¼»ç«‡ç‚</div>
                <div class="symptoms">é¼»å¡ã€é¢éƒ¨ç–¼ç—›ã€è†¿æ€§é¼»æ¶•ã€ç™¼ç†±</div>
            </div>
            
            <div class="disease-card" data-disease="æ€¥æ€§ä¸­è€³ç‚" data-pathogens="è‚ºç‚éˆçƒèŒ,æµæ„Ÿå—œè¡€æ¡¿èŒ,è«æ‹‰æ°èŒ">
                <div class="disease-location">ä¸­è€³</div>
                <div class="disease-name">æ€¥æ€§ä¸­è€³ç‚</div>
                <div class="symptoms">è€³ç—›ã€ç™¼ç†±ã€è½åŠ›ä¸‹é™ã€ç…©èº</div>
            </div>
            
            <div class="disease-card" data-disease="æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚" data-pathogens="æµæ„Ÿç—…æ¯’,å‘¼å¸é“åˆèƒç—…æ¯’,è…ºç—…æ¯’,è‚ºç‚é»´æ¼¿èŒ,è‚ºç‚éˆçƒèŒ">
                <div class="disease-location">ä¸‹å‘¼å¸é“</div>
                <div class="disease-name">æ€¥æ€§æ”¯æ°£ç®¡ç‚/è‚ºç‚</div>
                <div class="symptoms">å’³å—½ã€å–˜æ¯ã€ç™¼ç†±ã€èƒ¸æ‚¶ã€å‘¼å¸å›°é›£</div>
            </div>
        </div>
        
        <div class="connections-container" id="connectionsContainer">
            <!-- é€£æ¥ç·šå°‡é€šéJavaScriptå‹•æ…‹ç”Ÿæˆ -->
        </div>
    </div>
    
    <div class="clinical-tips">
        <h3>ğŸ“‹ æ ¸å¿ƒè‡¨åºŠè¦é»</h3>
        <ul>
            <li><strong>é›™å‘äº’å‹•åŠŸèƒ½</strong>ï¼šé»æ“Šå·¦å´ç—…åŸé«”å¯æŸ¥çœ‹å…¶å¼•èµ·çš„ç–¾ç—…ï¼Œé»æ“Šå³å´ç–¾ç—…å¯æŸ¥çœ‹ç›¸é—œç—…åŸé«”ã€‚</li>
            <li><strong>äºŒéƒ¨åœ–å±•ç¤ºé—œè¯</strong>ï¼šå·¦å´ç—…åŸé«”èˆ‡å³å´ç–¾ç—…ä¹‹é–“çš„é€£ç·šè¡¨ç¤ºç—…åŸé«”å¯å¼•èµ·è©²ç–¾ç—…ã€‚</li>
            <li><strong>å¤šç—…åŸé«”è‡´ç—…</strong>ï¼šä¸€ç¨®ç–¾ç—…å¯ç”±å¤šç¨®ç—…åŸé«”å¼•èµ·ï¼Œå¦‚æ€¥æ€§é¼»ç‚å¯ç”±é¼»ç—…æ¯’ã€å† ç‹€ç—…æ¯’ã€è…ºç—…æ¯’ã€æµæ„Ÿç—…æ¯’ç­‰å¼•èµ·ã€‚</li>
            <li><strong>ç—…åŸé«”ç‰¹ç•°æ€§</strong>ï¼šæŸäº›ç—…åŸé«”ä¸»è¦å¼•èµ·ç‰¹å®šéƒ¨ä½ç–¾ç—…ï¼Œå¦‚è‚ºç‚éˆçƒèŒä¸»è¦å¼•èµ·é¼»ç«‡ç‚ã€ä¸­è€³ç‚å’Œè‚ºç‚ã€‚</li>
            <li><strong>è¨ºæ–·èˆ‡æ²»ç™‚åŸå‰‡</strong>ï¼šç—…æ¯’æ„ŸæŸ“å¤šç‚ºè‡ªé™æ€§ï¼Œä»¥å°ç—‡æ”¯æŒæ²»ç™‚ç‚ºä¸»ï¼›ç´°èŒæ„ŸæŸ“éœ€ä¾æ“šæŒ‡å—ä½¿ç”¨æŠ—ç”Ÿç´ ã€‚</li>
        </ul>
    </div>
    
    <footer>
        <p>æœ¬äºŒéƒ¨åœ–æ ¹æ“šè‡¨åºŠæŒ‡å—åŠæ–‡ç»è³‡æ–™æ•´ç†ï¼Œåƒ…ä¾›åƒè€ƒå’Œå­¸ç¿’ä½¿ç”¨ã€‚å…·é«”è¨ºæ–·å’Œæ²»ç™‚è«‹å’¨è©¢é†«ç™‚å°ˆæ¥­äººå“¡ã€‚</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pathogenCards = document.querySelectorAll('.pathogen-card');
            const diseaseCards = document.querySelectorAll('.disease-card');
            const connectionsContainer = document.getElementById('connectionsContainer');
            const resetBtn = document.getElementById('resetBtn');
            const pathogenModeBtn = document.getElementById('pathogenMode');
            const diseaseModeBtn = document.getElementById('diseaseMode');
            
            let currentMode = 'pathogen'; // ç•¶å‰æ¨¡å¼ï¼š'pathogen' æˆ– 'disease'
            
            // å­˜å„²æ‰€æœ‰é€£æ¥ç·š
            let connections = [];
            
            // ç—…åŸé«”åˆ°ç–¾ç—…çš„æ˜ å°„é—œä¿‚
            const pathogenToDiseases = {
                'é¼»ç—…æ¯’': ['æ€¥æ€§é¼»ç‚', 'æ€¥æ€§å’½å–‰ç‚', 'æ€¥æ€§å–‰ç‚'],
                'å† ç‹€ç—…æ¯’': ['æ€¥æ€§é¼»ç‚'],
                'è…ºç—…æ¯’': ['æ€¥æ€§é¼»ç‚', 'æ€¥æ€§å’½å–‰ç‚', 'æ€¥æ€§å–‰ç‚', 'æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚'],
                'æµæ„Ÿç—…æ¯’': ['æ€¥æ€§é¼»ç‚', 'æ€¥æ€§å’½å–‰ç‚', 'æ€¥æ€§å–‰ç‚', 'æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚'],
                'Aç¾¤éˆçƒèŒ': ['æ€¥æ€§å’½å–‰ç‚'],
                'å‰¯æµæ„Ÿç—…æ¯’': ['æ€¥æ€§å–‰ç‚'],
                'è‚ºç‚éˆçƒèŒ': ['æ€¥æ€§é¼»ç«‡ç‚', 'æ€¥æ€§ä¸­è€³ç‚', 'æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚'],
                'æµæ„Ÿå—œè¡€æ¡¿èŒ': ['æ€¥æ€§é¼»ç«‡ç‚', 'æ€¥æ€§ä¸­è€³ç‚'],
                'è«æ‹‰æ°èŒ': ['æ€¥æ€§é¼»ç«‡ç‚', 'æ€¥æ€§ä¸­è€³ç‚'],
                'å‘¼å¸é“åˆèƒç—…æ¯’': ['æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚'],
                'è‚ºç‚é»´æ¼¿èŒ': ['æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚']
            };
            
            // ç–¾ç—…åˆ°ç—…åŸé«”çš„æ˜ å°„é—œä¿‚ï¼ˆåå‘ï¼‰
            const diseaseToPathogens = {
                'æ€¥æ€§é¼»ç‚': ['é¼»ç—…æ¯’', 'å† ç‹€ç—…æ¯’', 'è…ºç—…æ¯’', 'æµæ„Ÿç—…æ¯’'],
                'æ€¥æ€§å’½å–‰ç‚': ['Aç¾¤éˆçƒèŒ', 'è…ºç—…æ¯’', 'é¼»ç—…æ¯’', 'æµæ„Ÿç—…æ¯’'],
                'æ€¥æ€§å–‰ç‚': ['æµæ„Ÿç—…æ¯’', 'å‰¯æµæ„Ÿç—…æ¯’', 'è…ºç—…æ¯’', 'é¼»ç—…æ¯’'],
                'æ€¥æ€§é¼»ç«‡ç‚': ['è‚ºç‚éˆçƒèŒ', 'æµæ„Ÿå—œè¡€æ¡¿èŒ', 'è«æ‹‰æ°èŒ'],
                'æ€¥æ€§ä¸­è€³ç‚': ['è‚ºç‚éˆçƒèŒ', 'æµæ„Ÿå—œè¡€æ¡¿èŒ', 'è«æ‹‰æ°èŒ'],
                'æ€¥æ€§æ”¯æ°£ç®¡ç‚è‚ºç‚': ['æµæ„Ÿç—…æ¯’', 'å‘¼å¸é“åˆèƒç—…æ¯’', 'è…ºç—…æ¯’', 'è‚ºç‚é»´æ¼¿èŒ', 'è‚ºç‚éˆçƒèŒ']
            };
            
            // ç—…åŸé«”é¡è‰²æ˜ å°„
            const pathogenColors = {
                'é¼»ç—…æ¯’': '#FF6B6B',
                'å† ç‹€ç—…æ¯’': '#FFA726',
                'è…ºç—…æ¯’': '#4ECDC4',
                'æµæ„Ÿç—…æ¯’': '#FF4081',
                'Aç¾¤éˆçƒèŒ': '#7E57C2',
                'å‰¯æµæ„Ÿç—…æ¯’': '#5C6BC0',
                'è‚ºç‚éˆçƒèŒ': '#26A69A',
                'æµæ„Ÿå—œè¡€æ¡¿èŒ': '#42A5F5',
                'è«æ‹‰æ°èŒ': '#9CCC65',
                'å‘¼å¸é“åˆèƒç—…æ¯’': '#8D6E63',
                'è‚ºç‚é»´æ¼¿èŒ': '#FF7043'
            };
            
            // å‰µå»ºæ‰€æœ‰é€£æ¥ç·š
            function createConnections() {
                // æ¸…é™¤ç¾æœ‰é€£æ¥ç·š
                connectionsContainer.innerHTML = '';
                connections = [];
                
                // éæ­·æ‰€æœ‰ç—…åŸé«”
                Object.keys(pathogenToDiseases).forEach(pathogenName => {
                    const diseases = pathogenToDiseases[pathogenName];
                    const pathogenCard = document.querySelector(`.pathogen-card[data-pathogen="${pathogenName}"]`);
                    
                    if (!pathogenCard) return;
                    
                    diseases.forEach(diseaseName => {
                        const diseaseCard = document.querySelector(`.disease-card[data-disease="${diseaseName}"]`);
                        
                        if (!diseaseCard) return;
                        
                        // å‰µå»ºé€£æ¥ç·š
                        const connection = document.createElement('div');
                        connection.className = 'connection-line';
                        connection.setAttribute('data-pathogen', pathogenName);
                        connection.setAttribute('data-disease', diseaseName);
                        
                        // è¨­ç½®ç·šæ¢é¡è‰²ç‚ºç—…åŸé«”é¡è‰²
                        connection.style.backgroundColor = pathogenColors[pathogenName] || '#3498db';
                        
                        connectionsContainer.appendChild(connection);
                        connections.push({
                            element: connection,
                            pathogen: pathogenName,
                            disease: diseaseName
                        });
                    });
                });
                
                // æ›´æ–°é€£æ¥ç·šä½ç½®
                updateConnectionPositions();
            }
            
            // æ›´æ–°é€£æ¥ç·šä½ç½®
            function updateConnectionPositions() {
                connections.forEach(conn => {
                    const pathogenCard = document.querySelector(`.pathogen-card[data-pathogen="${conn.pathogen}"]`);
                    const diseaseCard = document.querySelector(`.disease-card[data-disease="${conn.disease}"]`);
                    
                    if (!pathogenCard || !diseaseCard) return;
                    
                    const pathogenRect = pathogenCard.getBoundingClientRect();
                    const diseaseRect = diseaseCard.getBoundingClientRect();
                    const containerRect = connectionsContainer.getBoundingClientRect();
                    
                    // è¨ˆç®—èµ·å§‹é»å’ŒçµæŸé»ï¼ˆç›¸å°æ–¼å®¹å™¨ï¼‰
                    const startX = pathogenRect.right - containerRect.left;
                    const startY = pathogenRect.top + pathogenRect.height / 2 - containerRect.top;
                    const endX = diseaseRect.left - containerRect.left;
                    const endY = diseaseRect.top + diseaseRect.height / 2 - containerRect.top;
                    
                    // è¨ˆç®—ç·šæ¢é•·åº¦å’Œè§’åº¦
                    const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
                    const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
                    
                    // è¨­ç½®ç·šæ¢ä½ç½®å’Œæ¨£å¼
                    conn.element.style.width = `${length}px`;
                    conn.element.style.left = `${startX}px`;
                    conn.element.style.top = `${startY}px`;
                    conn.element.style.transform = `rotate(${angle}deg)`;
                    conn.element.style.opacity = '0.6';
                });
            }
            
            // é«˜äº®èˆ‡ç—…åŸé«”ç›¸é—œçš„é€£æ¥ç·šå’Œç–¾ç—…å¡ç‰‡ï¼ˆç—…åŸé«”æ¨¡å¼ï¼‰
            function highlightByPathogen(pathogenName) {
                // é‡ç½®æ‰€æœ‰é«˜äº®
                resetHighlights();
                
                // é«˜äº®ç—…åŸé«”å¡ç‰‡
                const activePathogenCard = document.querySelector(`.pathogen-card[data-pathogen="${pathogenName}"]`);
                if (activePathogenCard) {
                    activePathogenCard.classList.add('active');
                }
                
                // é«˜äº®ç›¸é—œç–¾ç—…å¡ç‰‡å’Œé€£æ¥ç·š
                const relatedDiseases = pathogenToDiseases[pathogenName] || [];
                
                relatedDiseases.forEach(diseaseName => {
                    // é«˜äº®ç–¾ç—…å¡ç‰‡
                    const diseaseCard = document.querySelector(`.disease-card[data-disease="${diseaseName}"]`);
                    if (diseaseCard) {
                        diseaseCard.classList.add('pathogen-active');
                    }
                    
                    // é«˜äº®é€£æ¥ç·š
                    const relatedConnections = connections.filter(conn => 
                        conn.pathogen === pathogenName && conn.disease === diseaseName
                    );
                    
                    relatedConnections.forEach(conn => {
                        conn.element.classList.add('highlight');
                        conn.element.style.opacity = '1';
                        conn.element.style.zIndex = '10';
                    });
                });
                
                // æ·¡åŒ–ä¸ç›¸é—œçš„é€£æ¥ç·š
                connections.forEach(conn => {
                    if (conn.pathogen !== pathogenName) {
                        conn.element.style.opacity = '0.2';
                    }
                });
            }
            
            // é«˜äº®èˆ‡ç–¾ç—…ç›¸é—œçš„é€£æ¥ç·šå’Œç—…åŸé«”å¡ç‰‡ï¼ˆç–¾ç—…æ¨¡å¼ï¼‰
            function highlightByDisease(diseaseName) {
                // é‡ç½®æ‰€æœ‰é«˜äº®
                resetHighlights();
                
                // é«˜äº®ç–¾ç—…å¡ç‰‡
                const activeDiseaseCard = document.querySelector(`.disease-card[data-disease="${diseaseName}"]`);
                if (activeDiseaseCard) {
                    activeDiseaseCard.classList.add('active');
                }
                
                // é«˜äº®ç›¸é—œç—…åŸé«”å¡ç‰‡å’Œé€£æ¥ç·š
                const relatedPathogens = diseaseToPathogens[diseaseName] || [];
                
                relatedPathogens.forEach(pathogenName => {
                    // é«˜äº®ç—…åŸé«”å¡ç‰‡
                    const pathogenCard = document.querySelector(`.pathogen-card[data-pathogen="${pathogenName}"]`);
                    if (pathogenCard) {
                        pathogenCard.classList.add('disease-active');
                    }
                    
                    // é«˜äº®é€£æ¥ç·š
                    const relatedConnections = connections.filter(conn => 
                        conn.disease === diseaseName && conn.pathogen === pathogenName
                    );
                    
                    relatedConnections.forEach(conn => {
                        conn.element.classList.add('disease-highlight');
                        conn.element.style.opacity = '1';
                        conn.element.style.zIndex = '10';
                    });
                });
                
                // æ·¡åŒ–ä¸ç›¸é—œçš„é€£æ¥ç·š
                connections.forEach(conn => {
                    if (conn.disease !== diseaseName) {
                        conn.element.style.opacity = '0.2';
                    }
                });
            }
            
            // é‡ç½®æ‰€æœ‰é«˜äº®
            function resetHighlights() {
                // ç§»é™¤ç—…åŸé«”å¡ç‰‡é«˜äº®
                pathogenCards.forEach(card => {
                    card.classList.remove('active');
                    card.classList.remove('disease-active');
                });
                
                // ç§»é™¤ç–¾ç—…å¡ç‰‡é«˜äº®
                diseaseCards.forEach(card => {
                    card.classList.remove('active');
                    card.classList.remove('pathogen-active');
                });
                
                // ç§»é™¤é€£æ¥ç·šé«˜äº®
                connections.forEach(conn => {
                    conn.element.classList.remove('highlight');
                    conn.element.classList.remove('disease-highlight');
                    conn.element.style.opacity = '0.6';
                    conn.element.style.zIndex = '1';
                });
            }
            
            // åˆ‡æ›æ¨¡å¼
            function setMode(mode) {
                currentMode = mode;
                
                // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
                if (mode === 'pathogen') {
                    pathogenModeBtn.classList.add('active');
                    diseaseModeBtn.classList.remove('active');
                } else {
                    diseaseModeBtn.classList.add('active');
                    pathogenModeBtn.classList.remove('active');
                }
                
                // é‡ç½®é«˜äº®
                resetHighlights();
            }
            
            // ç‚ºç—…åŸé«”å¡ç‰‡æ·»åŠ é»æ“Šäº‹ä»¶
            pathogenCards.forEach(card => {
                card.addEventListener('click', function() {
                    const pathogenName = this.getAttribute('data-pathogen');
                    setMode('pathogen');
                    highlightByPathogen(pathogenName);
                });
            });
            
            // ç‚ºç–¾ç—…å¡ç‰‡æ·»åŠ é»æ“Šäº‹ä»¶
            diseaseCards.forEach(card => {
                card.addEventListener('click', function() {
                    const diseaseName = this.getAttribute('data-disease');
                    setMode('disease');
                    highlightByDisease(diseaseName);
                });
            });
            
            // æ¨¡å¼åˆ‡æ›æŒ‰éˆ•äº‹ä»¶
            pathogenModeBtn.addEventListener('click', function() {
                setMode('pathogen');
            });
            
            diseaseModeBtn.addEventListener('click', function() {
                setMode('disease');
            });
            
            // é‡ç½®æŒ‰éˆ•äº‹ä»¶
            resetBtn.addEventListener('click', resetHighlights);
            
            // çª—å£å¤§å°æ”¹è®Šæ™‚æ›´æ–°é€£æ¥ç·šä½ç½®
            window.addEventListener('resize', updateConnectionPositions);
            
            // åˆå§‹å‰µå»ºé€£æ¥ç·š
            createConnections();
            
            // åˆå§‹é«˜äº®ç¬¬ä¸€å€‹ç—…åŸé«”
            setTimeout(() => {
                setMode('pathogen');
                highlightByPathogen('é¼»ç—…æ¯’');
            }, 500);
        });
    </script>
</body>
</html>

